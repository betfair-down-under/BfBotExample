using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Betfair.ESAClient.Helpers
{
    static public class OddsLadder
    {
        public static decimal Snap(decimal value, bool up)
        {
            if (up)
            {
                return ladder.Where(n => n >= value).Min(); 
            }
            else
            {
                return ladder.Where(n => n <= value).Max();
            }
        }

        public static decimal NextPrice(decimal value, bool back)
        {
            if (back)
            {
                return ladder.Where(n => n > value).Min();
            }
            else
            {
                return ladder.Where(n => n < value).Max();
            }
        }

        public static int LadderDistance(decimal price1, decimal price2)
        {
            var ladderAsList = new List<decimal>(ladder);
            return Math.Abs(ladderAsList.FindIndex(p => p == price2) - ladderAsList.FindIndex(p => p == price1));
        }

        static decimal[] ladder = new decimal[]{
        0M,
        1.01M,
        1.02M,
        1.03M,
        1.04M,
        1.05M,
        1.06M,
        1.07M,
        1.08M,
        1.09M,
        1.10M,
        1.11M,
        1.12M,
        1.13M,
        1.14M,
        1.15M,
        1.16M,
        1.17M,
        1.18M,
        1.19M,
        1.20M,
        1.21M,
        1.22M,
        1.23M,
        1.24M,
        1.25M,
        1.26M,
        1.27M,
        1.28M,
        1.29M,
        1.30M,
        1.31M,
        1.32M,
        1.33M,
        1.34M,
        1.35M,
        1.36M,
        1.37M,
        1.38M,
        1.39M,
        1.40M,
        1.41M,
        1.42M,
        1.43M,
        1.44M,
        1.45M,
        1.46M,
        1.47M,
        1.48M,
        1.49M,
        1.50M,
        1.51M,
        1.52M,
        1.53M,
        1.54M,
        1.55M,
        1.56M,
        1.57M,
        1.58M,
        1.59M,
        1.60M,
        1.61M,
        1.62M,
        1.63M,
        1.64M,
        1.65M,
        1.66M,
        1.67M,
        1.68M,
        1.69M,
        1.70M,
        1.71M,
        1.72M,
        1.73M,
        1.74M,
        1.75M,
        1.76M,
        1.77M,
        1.78M,
        1.79M,
        1.80M,
        1.81M,
        1.82M,
        1.83M,
        1.84M,
        1.85M,
        1.86M,
        1.87M,
        1.88M,
        1.89M,
        1.90M,
        1.91M,
        1.92M,
        1.93M,
        1.94M,
        1.95M,
        1.96M,
        1.97M,
        1.98M,
        1.99M,
        2.00M,
        2.02M,
        2.04M,
        2.06M,
        2.08M,
        2.10M,
        2.12M,
        2.14M,
        2.16M,
        2.18M,
        2.20M,
        2.22M,
        2.24M,
        2.26M,
        2.28M,
        2.30M,
        2.32M,
        2.34M,
        2.36M,
        2.38M,
        2.40M,
        2.42M,
        2.44M,
        2.46M,
        2.48M,
        2.50M,
        2.52M,
        2.54M,
        2.56M,
        2.58M,
        2.60M,
        2.62M,
        2.64M,
        2.66M,
        2.68M,
        2.70M,
        2.72M,
        2.74M,
        2.76M,
        2.78M,
        2.80M,
        2.82M,
        2.84M,
        2.86M,
        2.88M,
        2.90M,
        2.92M,
        2.94M,
        2.96M,
        2.98M,
        3.00M,
        3.05M,
        3.10M,
        3.15M,
        3.20M,
        3.25M,
        3.30M,
        3.35M,
        3.40M,
        3.45M,
        3.50M,
        3.55M,
        3.60M,
        3.65M,
        3.70M,
        3.75M,
        3.80M,
        3.85M,
        3.90M,
        3.95M,
        4.00M,
        4.10M,
        4.20M,
        4.30M,
        4.40M,
        4.50M,
        4.60M,
        4.70M,
        4.80M,
        4.90M,
        5.00M,
        5.10M,
        5.20M,
        5.30M,
        5.40M,
        5.50M,
        5.60M,
        5.70M,
        5.80M,
        5.90M,
        6.00M,
        6.20M,
        6.40M,
        6.60M,
        6.80M,
        7.00M,
        7.20M,
        7.40M,
        7.60M,
        7.80M,
        8.00M,
        8.20M,
        8.40M,
        8.60M,
        8.80M,
        9.00M,
        9.20M,
        9.40M,
        9.60M,
        9.80M,
        10.00M,
        10.50M,
        11.00M,
        11.50M,
        12.00M,
        12.50M,
        13.00M,
        13.50M,
        14.00M,
        14.50M,
        15.00M,
        15.50M,
        16.00M,
        16.50M,
        17.00M,
        17.50M,
        18.00M,
        18.50M,
        19.00M,
        19.50M,
        20.00M,
        21.00M,
        22.00M,
        23.00M,
        24.00M,
        26.00M,
        28.00M,
        29.00M,
        30.00M,
        31.00M,
        32.00M,
        34.00M,
        36.00M,
        38.00M,
        40.00M,
        41.00M,
        42.00M,
        44.00M,
        46.00M,
        48.00M,
        50.00M,
        51.00M,
        55.00M,
        60.00M,
        61.00M,
        65.00M,
        66.00M,
        67.00M,
        70.00M,
        71.00M,
        75.00M,
        76.00M,
        80.00M,
        81.00M,
        85.00M,
        90.00M,
        91.00M,
        95.00M,
        100.00M,
        101.00M,
        110.00M,
        111.00M,
        120.00M,
        126.00M,
        130.00M,
        140.00M,
        150.00M,
        151.00M,
        160.00M,
        170.00M,
        176.00M,
        180.00M,
        190.00M,
        200.00M,
        201.00M,
        210.00M,
        220.00M,
        226.00M,
        230.00M,
        240.00M,
        250.00M,
        251.00M,
        260.00M,
        270.00M,
        276.00M,
        280.00M,
        290.00M,
        300.00M,
        301.00M,
        310.00M,
        320.00M,
        330.00M,
        340.00M,
        350.00M,
        351.00M,
        360.00M,
        370.00M,
        380.00M,
        390.00M,
        400.00M,
        401.00M,
        410.00M,
        420.00M,
        430.00M,
        440.00M,
        450.00M,
        460.00M,
        470.00M,
        480.00M,
        490.00M,
        500.00M,
        501.00M,
        510.00M,
        520.00M,
        530.00M,
        540.00M,
        550.00M,
        560.00M,
        570.00M,
        580.00M,
        590.00M,
        600.00M,
        610.00M,
        620.00M,
        630.00M,
        640.00M,
        650.00M,
        660.00M,
        670.00M,
        680.00M,
        690.00M,
        700.00M,
        710.00M,
        720.00M,
        730.00M,
        740.00M,
        750.00M,
        751.00M,
        760.00M,
        770.00M,
        780.00M,
        790.00M,
        800.00M,
        810.00M,
        820.00M,
        830.00M,
        840.00M,
        850.00M,
        860.00M,
        870.00M,
        880.00M,
        890.00M,
        900.00M,
        910.00M,
        920.00M,
        930.00M,
        940.00M,
        950.00M,
        960.00M,
        970.00M,
        980.00M,
        990.00M,
        1000.00M,
        1001.00M,
        decimal.MaxValue
            };
    }
}
